{"remainingRequest":"E:\\padagogy-object\\padagogy-reception\\node_modules\\babel-loader\\lib\\index.js!E:\\padagogy-object\\padagogy-reception\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\padagogy-object\\padagogy-reception\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\padagogy-object\\padagogy-reception\\src\\views\\Padagogy\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\padagogy-object\\padagogy-reception\\src\\views\\Padagogy\\index.vue","mtime":1651301150637},{"path":"E:\\padagogy-object\\padagogy-reception\\babel.config.js","mtime":1647849872931},{"path":"E:\\padagogy-object\\padagogy-reception\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647849868210},{"path":"E:\\padagogy-object\\padagogy-reception\\node_modules\\babel-loader\\lib\\index.js","mtime":1647849868753},{"path":"E:\\padagogy-object\\padagogy-reception\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647849868210},{"path":"E:\\padagogy-object\\padagogy-reception\\node_modules\\vue-loader\\lib\\index.js","mtime":1647849868876}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkU6L3BhZGFnb2d5LW9iamVjdC9wYWRhZ29neS1yZWNlcHRpb24vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJFOi9wYWRhZ29neS1vYmplY3QvcGFkYWdvZ3ktcmVjZXB0aW9uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmxhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnVuc2NvcGFibGVzLmZsYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBTZWxlY3RvciBmcm9tICIuL2NvbXBvbmVudHMvU2VsZWN0b3IiOwppbXBvcnQgQXBwTGlzdCBmcm9tICJAL2NvbXBvbmVudHMvQXBwTGlzdCI7CmltcG9ydCBmZXRjaERhdGEgZnJvbSAiQC9taXhpbnMvZmV0Y2hEYXRhLmpzIjsKaW1wb3J0IFBhZ2VyIGZyb20gIkAvY29tcG9uZW50cy9QYWdlciI7CmltcG9ydCB7IGdldEFwcExpc3QsIGdldFNlbGVjdG9yIH0gZnJvbSAiQC9hcGkvcGFkYWdvZ3kuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbWl4aW5zOiBbZmV0Y2hEYXRhKHt9KV0sCiAgY29tcG9uZW50czogewogICAgU2VsZWN0b3I6IFNlbGVjdG9yLAogICAgQXBwTGlzdDogQXBwTGlzdCwKICAgIFBhZ2VyOiBQYWdlcgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBhZ2U6IDEKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLy8g6I635Y+WdXJs5Y+C5pWwCiAgICBwYXJhbTogZnVuY3Rpb24gcGFyYW0oKSB7CiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5xdWVyeTsKICAgIH0sCiAgICBsaXN0OiBmdW5jdGlvbiBsaXN0KCkgewogICAgICAvLyBjb25zb2xlLmxvZygi5omn6KGMIik7CiAgICAgIC8v5Yqg5bel5ZCO5Lyg57uZU2VsZWN0b3Lnu4Tku7bnmoTlsZ7mgKcKICAgICAgdmFyIGFyciA9IFtdOwogICAgICB2YXIgZmlyc3RMaXN0ID0gW107CgogICAgICBpZiAodGhpcy5kYXRhLnNlbFJlc3ApIHsKICAgICAgICBmaXJzdExpc3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZGF0YS5zZWxSZXNwKSk7CiAgICAgIH0gLy8gY29uc29sZS5sb2codGhpcy5kYXRhLnNlbFJlc3AsIGZpcnN0TGlzdCk7CiAgICAgIC8v5bCG5LuOdXJs5Lit5ou/5Yiw55qE5Y+C5pWw6L+b6KGM5YiG5YmyCgoKICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMucGFyYW0pIHsKICAgICAgICBhcnIucHVzaCh0aGlzLnBhcmFtW2tleV0uc3BsaXQoIiAiKSk7CiAgICAgIH0gLy/mlbDnu4TmiYHlubPljJYKCgogICAgICBhcnIgPSBhcnIuZmxhdChJbmZpbml0eSk7IC8v6YGN5Y6G5aSa57qn6I+c5Y2V5pWw5o2u77yM5Li65q+P6aG55pWw5o2u5Yqg5LiKc2VsZWN0ZWTlsZ7mgKcKCiAgICAgIGZ1bmN0aW9uIHRyYXZlcnNlKGFyciwgc3ViKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coKQogICAgICAgIHZhciBuZXdBcnIgPSBhcnIubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBzdWIuaW5kZXhPZih0LnZhbHVlKSA+PSAwOyAvLyBjb25zb2xlLmxvZyhzZWxlY3RlZCk7CgogICAgICAgICAgaWYgKHQuY2hpbGRyZW4pIHQuY2hpbGRyZW4gPSB0cmF2ZXJzZSh0LmNoaWxkcmVuLCBzdWIpOwogICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICBzZWxlY3RlZDogc2VsZWN0ZWQKICAgICAgICAgIH0sIHQpOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBuZXdBcnI7CiAgICAgIH0KCiAgICAgIGFyciA9IHRyYXZlcnNlKGZpcnN0TGlzdCwgYXJyKTsgLy8gY29uc29sZS5sb3NnKGFycik7CgogICAgICByZXR1cm4gYXJyOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZmV0Y2hEYXRhOiBmdW5jdGlvbiBmZXRjaERhdGEoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBwYXJhbSwgc2VsUmVzcCwgYXBwUmVzcDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBwYXJhbSA9IE9iamVjdC5rZXlzKF90aGlzLnBhcmFtKS5sZW5ndGggfHwgImFsbCI7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRTZWxlY3RvcigpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBzZWxSZXNwID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIGdldEFwcExpc3QoX3RoaXMucGFnZSwgMjAsIHBhcmFtKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgYXBwUmVzcCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgICAgIHNlbFJlc3A6IHNlbFJlc3AsCiAgICAgICAgICAgICAgICAgIGFwcFJlc3A6IGFwcFJlc3AKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgaGFuZGxlUGFnZUNoYW5nZTogZnVuY3Rpb24gaGFuZGxlUGFnZUNoYW5nZShuZXdQYWdlKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKG5ld1BhZ2UpOwogICAgICB0aGlzLnBhZ2UgPSBuZXdQYWdlOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHBhZ2U6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9wYWdlID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIjEiKTsKICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRBcHBMaXN0KHRoaXMucGFnZSwgMjAsIHRoaXMucGFyYW0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICB0aGlzLmRhdGEuYXBwUmVzcCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gcGFnZSgpIHsKICAgICAgICByZXR1cm4gX3BhZ2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHBhZ2U7CiAgICB9KCksCiAgICAkcm91dGU6IGZ1bmN0aW9uICRyb3V0ZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldEFwcExpc3QoX3RoaXMyLnBhZ2UsIDIwLCBfdGhpczIucGFyYW0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBfdGhpczIuZGF0YS5hcHBSZXNwID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACAA,yBADA;AAEAC;AACAC,sBADA;AAEAC,oBAFA;AAGAC;AAHA,GAFA;AAOAC,MAPA,kBAOA;AACA;AACAC;AADA;AAGA,GAXA;AAYAC;AACA;AACAC,SAFA,mBAEA;AACA;AACA,KAJA;AAKAC,QALA,kBAKA;AACA;AACA;AACA;AAEA;;AACA;AACAC;AACA,OARA,CASA;AACA;;;AACA;AACAC;AACA,OAbA,CAeA;;;AACAA,+BAhBA,CAkBA;;AACA;AACA;AACA;AACA,mDADA,CAEA;;AACA;AACA;AACAC;AADA,aAEAC,CAFA;AAIA,SARA;AASA;AACA;;AACAF,qCAhCA,CAiCA;;AACA;AACA;AAxCA,GAZA;AAsDAG;AACAC,aADA,uBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACAP,qBADA,GACAQ,wCADA;AAAA;AAAA,uBAEAC,aAFA;;AAAA;AAEAC,uBAFA;AAAA;AAAA,uBAGAC,iCAHA;;AAAA;AAGAC,uBAHA;AAAA,iDAIA;AACAF,kCADA;AAEAE;AAFA,iBAJA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA,KATA;AAUAC,oBAVA,4BAUAC,OAVA,EAUA;AACA;AACA;AACA;AAbA,GAtDA;AAqEAC;AACAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA,uBAGAa,qCAHA;;AAAA;AAGA,iCAHA;AAIA;;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,OADA;AAOAK,UAPA,oBAOA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACAL,yCADA;;AAAA;AACA,mCADA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AATA;AArEA","names":["mixins","components","Selector","AppList","Pager","data","page","computed","param","list","firstList","arr","selected","t","methods","fetchData","Object","getSelector","selResp","getAppList","appResp","handlePageChange","newPage","watch","$route"],"sourceRoot":"src/views/Padagogy","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div class=\"padagogy-container\" v-if=\"this.data\">\r\n    <!-- 多级选择 -->\r\n    <div class=\"choose\">\r\n      <Selector :list=\"list\" />\r\n    </div>\r\n    <!-- app列表 -->\r\n    <div class=\"list\" v-if=\"data.appResp\">\r\n      <AppList\r\n        v-for=\"item in data.appResp.rows\"\r\n        :key=\"item.id\"\r\n        :data=\"item\"\r\n        :iconSize=\"20\"\r\n        :width=\"350\"\r\n        :height=\"450\"\r\n        style=\"margin: 0 0 10px 0\"\r\n      />\r\n    </div>\r\n    <!-- 分页 -->\r\n    <div class=\"pager\">\r\n      <Pager\r\n        v-if=\"data.appResp\"\r\n        :current=\"page\"\r\n        :total=\"data.appResp.total\"\r\n        :limit=\"20\"\r\n        :visibleNumber=\"10\"\r\n        @pageChange=\"handlePageChange\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Selector from \"./components/Selector\";\r\nimport AppList from \"@/components/AppList\";\r\nimport fetchData from \"@/mixins/fetchData.js\";\r\nimport Pager from \"@/components/Pager\";\r\nimport { getAppList, getSelector } from \"@/api/padagogy.js\";\r\nexport default {\r\n  mixins: [fetchData({})],\r\n  components: {\r\n    Selector,\r\n    AppList,\r\n    Pager,\r\n  },\r\n  data() {\r\n    return {\r\n      page: 1,\r\n    };\r\n  },\r\n  computed: {\r\n    // 获取url参数\r\n    param() {\r\n      return this.$route.query;\r\n    },\r\n    list() {\r\n      // console.log(\"执行\");\r\n      //加工后传给Selector组件的属性\r\n      var arr = [];\r\n\r\n      var firstList = [];\r\n      if (this.data.selResp) {\r\n        firstList = JSON.parse(JSON.stringify(this.data.selResp));\r\n      }\r\n      // console.log(this.data.selResp, firstList);\r\n      //将从url中拿到的参数进行分割\r\n      for (const key in this.param) {\r\n        arr.push(this.param[key].split(\" \"));\r\n      }\r\n\r\n      //数组扁平化\r\n      arr = arr.flat(Infinity);\r\n\r\n      //遍历多级菜单数据，为每项数据加上selected属性\r\n      function traverse(arr, sub) {\r\n        // console.log()\r\n        let newArr = arr.map((t) => {\r\n          let selected = sub.indexOf(t.value) >= 0;\r\n          // console.log(selected);\r\n          if (t.children) t.children = traverse(t.children, sub);\r\n          return {\r\n            selected,\r\n            ...t,\r\n          };\r\n        });\r\n        return newArr;\r\n      }\r\n      arr = traverse(firstList, arr);\r\n      // console.losg(arr);\r\n      return arr;\r\n    },\r\n  },\r\n  methods: {\r\n    async fetchData() {\r\n      let param = Object.keys(this.param).length || \"all\";\r\n      const selResp = await getSelector();\r\n      const appResp = await getAppList(this.page, 20, param);\r\n      return {\r\n        selResp,\r\n        appResp,\r\n      };\r\n    },\r\n    handlePageChange(newPage) {\r\n      // console.log(newPage);\r\n      this.page = newPage;\r\n    },\r\n  },\r\n  watch: {\r\n    page: async function () {\r\n      // console.log(\"1\");\r\n      this.isLoading = true;\r\n      this.data.appResp = await getAppList(this.page, 20, this.param);\r\n      this.isLoading = false;\r\n    },\r\n    async $route() {\r\n      this.data.appResp = await getAppList(this.page, 20, this.param);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import \"~@/style/var.less\";\r\n.padagogy-container {\r\n  padding: 20px 40px 0 40px;\r\n  width: calc(100% - 80px);\r\n  // height: 1000px;\r\n  .choose {\r\n    background-color: @asphalt;\r\n  }\r\n  .list {\r\n    font-size: 50px;\r\n    margin-top: 20px;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: space-between;\r\n  }\r\n  .pager {\r\n    padding: 10px 0;\r\n  }\r\n}\r\n// #a {\r\n//   width: 0;\r\n//   height: 0;\r\n// }\r\n</style>\r\n\r\n"]}]}