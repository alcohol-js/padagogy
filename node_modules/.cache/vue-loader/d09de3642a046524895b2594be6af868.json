{"remainingRequest":"E:\\padagogy-object\\padagogy-reception\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\padagogy-object\\padagogy-reception\\src\\views\\Padagogy\\index.vue?vue&type=style&index=0&id=1346f645&lang=less&scoped=true&","dependencies":[{"path":"E:\\padagogy-object\\padagogy-reception\\src\\views\\Padagogy\\index.vue","mtime":1652720352259},{"path":"E:\\padagogy-object\\padagogy-reception\\node_modules\\css-loader\\dist\\cjs.js","mtime":1647849868471},{"path":"E:\\padagogy-object\\padagogy-reception\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1647849869096},{"path":"E:\\padagogy-object\\padagogy-reception\\node_modules\\postcss-loader\\src\\index.js","mtime":1647849868751},{"path":"E:\\padagogy-object\\padagogy-reception\\node_modules\\less-loader\\dist\\cjs.js","mtime":1647849875488},{"path":"E:\\padagogy-object\\padagogy-reception\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647849868210},{"path":"E:\\padagogy-object\\padagogy-reception\\node_modules\\vue-loader\\lib\\index.js","mtime":1647849868876}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCkBpbXBvcnQgIn5AL3N0eWxlL3Zhci5sZXNzIjsNCi5wYWRhZ29neS1jb250YWluZXIgew0KICBwYWRkaW5nOiAyMHB4IDQwcHggMCA0MHB4Ow0KICB3aWR0aDogY2FsYygxMDAlIC0gODBweCk7DQogIC8vIGhlaWdodDogMTAwMHB4Ow0KICAuY2hvb3NlIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICB9DQogIC5saXN0IHsNCiAgICBwYWRkaW5nOiA1cHg7DQogICAgZm9udC1zaXplOiA1MHB4Ow0KICAgIG1hcmdpbi10b3A6IDIwcHg7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBmbGV4LXdyYXA6IHdyYXA7DQogICAgLy8gYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7DQogIH0NCiAgLnBhZ2VyIHsNCiAgICBwYWRkaW5nOiAxMHB4IDA7DQogIH0NCn0NCi8vICNhIHsNCi8vICAgd2lkdGg6IDA7DQovLyAgIGhlaWdodDogMDsNCi8vIH0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Padagogy","sourcesContent":["<template>\r\n  <div class=\"padagogy-container\" v-if=\"this.data\">\r\n    <!-- 多级选择 -->\r\n    <div class=\"choose\" v-show=\"this.data.selResp\">\r\n      <Selector :list=\"list\" />\r\n    </div>\r\n    <!-- app列表 -->\r\n    <div class=\"list\" v-if=\"!isLoading\">\r\n      <AppList\r\n        v-for=\"item in data.appResp.rows\"\r\n        :key=\"item.id\"\r\n        :data=\"item\"\r\n        :iconSize=\"20\"\r\n        :width=\"300\"\r\n        :height=\"450\"\r\n        style=\"margin: 10px 25px; background-color: #fff\"\r\n        @click=\"handleClick\"\r\n      />\r\n    </div>\r\n    <!-- 分页 -->\r\n    <div class=\"pager\">\r\n      <Pager\r\n        v-if=\"data.appResp\"\r\n        :current=\"page\"\r\n        :total=\"+data.appResp.total\"\r\n        :limit=\"20\"\r\n        :visibleNumber=\"10\"\r\n        @pageChange=\"handlePageChange\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Selector from \"./components/Selector\";\r\nimport AppList from \"@/components/AppList\";\r\nimport fetchData from \"@/mixins/fetchData.js\";\r\nimport Pager from \"@/components/Pager\";\r\nimport { getAppList, getSelector } from \"@/api/padagogy.js\";\r\nexport default {\r\n  mixins: [fetchData({})],\r\n  components: {\r\n    Selector,\r\n    AppList,\r\n    Pager,\r\n  },\r\n  data() {\r\n    return {\r\n      page: 1,\r\n    };\r\n  },\r\n  computed: {\r\n    // 获取url参数\r\n    param() {\r\n      return this.$route.query;\r\n    },\r\n    list() {\r\n      // console.log(this.data.selResp);\r\n      //加工后传给Selector组件的属性\r\n      var arr = [];\r\n\r\n      var firstList = [];\r\n      if (this.data.selResp) {\r\n        firstList = JSON.parse(JSON.stringify(this.data.selResp));\r\n      }\r\n      // console.log(this.data.selResp, firstList);\r\n      //将从url中拿到的参数进行分割\r\n      for (const key in this.param) {\r\n        arr.push(this.param[key].split(\" \"));\r\n      }\r\n\r\n      //数组扁平化\r\n      arr = arr.flat(Infinity);\r\n\r\n      //遍历多级菜单数据，为每项数据加上selected属性\r\n      function traverse(arr, sub) {\r\n        // console.log()\r\n        let newArr = arr.map((t) => {\r\n          let selected = sub.indexOf(t.value) >= 0;\r\n          // console.log(selected);\r\n          if (t.children) t.children = traverse(t.children, sub);\r\n          return {\r\n            selected,\r\n            ...t,\r\n          };\r\n        });\r\n        return newArr;\r\n      }\r\n      arr = traverse(firstList, arr);\r\n      // console.losg(arr);\r\n      return arr;\r\n    },\r\n  },\r\n  methods: {\r\n    async fetchData() {\r\n      // console.log(Object.keys(this.param).length, this.$route.query, \"1\");\r\n      let param = Object.keys(this.param).length ? this.param : \"all\";\r\n      // console.log(\"请求\");\r\n      const selResp = await getSelector();\r\n      const appResp = await getAppList(this.page, 20, param);\r\n      return {\r\n        selResp,\r\n        appResp,\r\n      };\r\n    },\r\n    handlePageChange(newPage) {\r\n      // console.log(newPage);\r\n      this.page = newPage;\r\n    },\r\n    handleClick(id) {\r\n      this.$router.push({\r\n        name: \"PadagogyDetail\",\r\n        params: {\r\n          id,\r\n        },\r\n      });\r\n    },\r\n  },\r\n  watch: {\r\n    page: async function () {\r\n      // console.log(\"1\");\r\n      this.isLoading = true;\r\n      this.data.appResp = await getAppList(this.page, 20, this.param);\r\n      this.isLoading = false;\r\n    },\r\n    async $route() {\r\n      console.log(\"url\");\r\n      this.page = 1;\r\n      this.data.appResp = await getAppList(this.page, 20, this.param);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import \"~@/style/var.less\";\r\n.padagogy-container {\r\n  padding: 20px 40px 0 40px;\r\n  width: calc(100% - 80px);\r\n  // height: 1000px;\r\n  .choose {\r\n    background-color: #fff;\r\n  }\r\n  .list {\r\n    padding: 5px;\r\n    font-size: 50px;\r\n    margin-top: 20px;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    // background-color: #fff;\r\n    justify-content: flex-start;\r\n  }\r\n  .pager {\r\n    padding: 10px 0;\r\n  }\r\n}\r\n// #a {\r\n//   width: 0;\r\n//   height: 0;\r\n// }\r\n</style>\r\n\r\n"]}]}