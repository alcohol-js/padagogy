{"remainingRequest":"E:\\padagogy-object\\padagogy-reception\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\padagogy-object\\padagogy-reception\\src\\views\\Padagogy\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\padagogy-object\\padagogy-reception\\src\\views\\Padagogy\\index.vue","mtime":1655614814831},{"path":"E:\\padagogy-object\\padagogy-reception\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647849868210},{"path":"E:\\padagogy-object\\padagogy-reception\\node_modules\\babel-loader\\lib\\index.js","mtime":1647849868753},{"path":"E:\\padagogy-object\\padagogy-reception\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647849868210},{"path":"E:\\padagogy-object\\padagogy-reception\\node_modules\\vue-loader\\lib\\index.js","mtime":1647849868876}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgU2VsZWN0b3IgZnJvbSAiLi9jb21wb25lbnRzL1NlbGVjdG9yIjsNCmltcG9ydCBBcHBMaXN0IGZyb20gIkAvY29tcG9uZW50cy9BcHBMaXN0IjsNCmltcG9ydCBmZXRjaERhdGEgZnJvbSAiQC9taXhpbnMvZmV0Y2hEYXRhLmpzIjsNCmltcG9ydCBQYWdlciBmcm9tICJAL2NvbXBvbmVudHMvUGFnZXIiOw0KaW1wb3J0IHsgZ2V0QXBwTGlzdCwgZ2V0U2VsZWN0b3IgfSBmcm9tICJAL2FwaS9wYWRhZ29neS5qcyI7DQpleHBvcnQgZGVmYXVsdCB7DQogIG1peGluczogW2ZldGNoRGF0YSh7fSldLA0KICBjb21wb25lbnRzOiB7DQogICAgU2VsZWN0b3IsDQogICAgQXBwTGlzdCwNCiAgICBQYWdlciwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgcGFnZTogMSwNCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC8vIOiOt+WPlnVybOWPguaVsA0KICAgIHBhcmFtKCkgew0KICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlLnF1ZXJ5Ow0KICAgIH0sDQogICAgbGlzdCgpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZGF0YS5zZWxSZXNwKTsNCiAgICAgIC8v5Yqg5bel5ZCO5Lyg57uZU2VsZWN0b3Lnu4Tku7bnmoTlsZ7mgKcNCiAgICAgIHZhciBhcnIgPSBbXTsNCg0KICAgICAgdmFyIGZpcnN0TGlzdCA9IFtdOw0KICAgICAgaWYgKHRoaXMuZGF0YS5zZWxSZXNwKSB7DQogICAgICAgIGZpcnN0TGlzdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5kYXRhLnNlbFJlc3ApKTsNCiAgICAgIH0NCiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZGF0YS5zZWxSZXNwLCBmaXJzdExpc3QpOw0KICAgICAgLy/lsIbku451cmzkuK3mi7/liLDnmoTlj4LmlbDov5vooYzliIblibINCiAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMucGFyYW0pIHsNCiAgICAgICAgYXJyLnB1c2godGhpcy5wYXJhbVtrZXldLnNwbGl0KCIgIikpOw0KICAgICAgfQ0KDQogICAgICAvL+aVsOe7hOaJgeW5s+WMlg0KICAgICAgYXJyID0gYXJyLmZsYXQoSW5maW5pdHkpOw0KDQogICAgICAvL+mBjeWOhuWkmue6p+iPnOWNleaVsOaNru+8jOS4uuavj+mhueaVsOaNruWKoOS4inNlbGVjdGVk5bGe5oCnDQogICAgICBmdW5jdGlvbiB0cmF2ZXJzZShhcnIsIHN1Yikgew0KICAgICAgICAvLyBjb25zb2xlLmxvZygpDQogICAgICAgIGxldCBuZXdBcnIgPSBhcnIubWFwKCh0KSA9PiB7DQogICAgICAgICAgbGV0IHNlbGVjdGVkID0gc3ViLmluZGV4T2YodC52YWx1ZSkgPj0gMDsNCiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzZWxlY3RlZCk7DQogICAgICAgICAgaWYgKHQuY2hpbGRyZW4pIHQuY2hpbGRyZW4gPSB0cmF2ZXJzZSh0LmNoaWxkcmVuLCBzdWIpOw0KICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBzZWxlY3RlZCwNCiAgICAgICAgICAgIC4uLnQsDQogICAgICAgICAgfTsNCiAgICAgICAgfSk7DQogICAgICAgIHJldHVybiBuZXdBcnI7DQogICAgICB9DQogICAgICBhcnIgPSB0cmF2ZXJzZShmaXJzdExpc3QsIGFycik7DQogICAgICAvLyBjb25zb2xlLmxvc2coYXJyKTsNCiAgICAgIHJldHVybiBhcnI7DQogICAgfSwNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGFzeW5jIGZldGNoRGF0YSgpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKE9iamVjdC5rZXlzKHRoaXMucGFyYW0pLmxlbmd0aCwgdGhpcy4kcm91dGUucXVlcnksICIxIik7DQogICAgICBsZXQgcGFyYW0gPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtKS5sZW5ndGggPyB0aGlzLnBhcmFtIDogImFsbCI7DQogICAgICAvLyBjb25zb2xlLmxvZygi6K+35rGCIik7DQogICAgICBjb25zdCBzZWxSZXNwID0gYXdhaXQgZ2V0U2VsZWN0b3IoKTsNCiAgICAgIGNvbnN0IGFwcFJlc3AgPSBhd2FpdCBnZXRBcHBMaXN0KHRoaXMucGFnZSwgMjAsIHBhcmFtKTsNCiAgICAgIHJldHVybiB7DQogICAgICAgIHNlbFJlc3AsDQogICAgICAgIGFwcFJlc3AsDQogICAgICB9Ow0KICAgIH0sDQogICAgaGFuZGxlUGFnZUNoYW5nZShuZXdQYWdlKSB7DQogICAgICAvLyBjb25zb2xlLmxvZyhuZXdQYWdlKTsNCiAgICAgIHRoaXMucGFnZSA9IG5ld1BhZ2U7DQogICAgfSwNCiAgICBoYW5kbGVDbGljayhpZCkgew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goew0KICAgICAgICBuYW1lOiAiUGFkYWdvZ3lEZXRhaWwiLA0KICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICBpZCwNCiAgICAgICAgfSwNCiAgICAgIH0pOw0KICAgIH0sDQogIH0sDQogIHdhdGNoOiB7DQogICAgcGFnZTogYXN5bmMgZnVuY3Rpb24gKCkgew0KICAgICAgLy8gY29uc29sZS5sb2coIjEiKTsNCiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsNCiAgICAgIHRoaXMuZGF0YS5hcHBSZXNwID0gYXdhaXQgZ2V0QXBwTGlzdCh0aGlzLnBhZ2UsIDIwLCB0aGlzLnBhcmFtKTsNCiAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7DQogICAgfSwNCiAgICBhc3luYyAkcm91dGUoKSB7DQogICAgICBjb25zb2xlLmxvZygidXJsIik7DQogICAgICB0aGlzLnBhZ2UgPSAxOw0KICAgICAgdGhpcy5kYXRhLmFwcFJlc3AgPSBhd2FpdCBnZXRBcHBMaXN0KHRoaXMucGFnZSwgMjAsIHRoaXMucGFyYW0pOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Padagogy","sourcesContent":["<template>\r\n  <div class=\"padagogy-container\" v-if=\"this.data\">\r\n    <!-- 多级选择 -->\r\n    <div class=\"choose\" v-show=\"this.data.selResp\">\r\n      <Selector :list=\"list\" />\r\n    </div>\r\n    <!-- app列表 -->\r\n    <div class=\"list\" v-if=\"!isLoading\">\r\n      <AppList\r\n        v-for=\"item in data.appResp.rows\"\r\n        :key=\"item.id\"\r\n        :data=\"item\"\r\n        :iconSize=\"20\"\r\n        :width=\"300\"\r\n        :height=\"450\"\r\n        style=\"margin: 10px auto; background-color: #fff; flex: 0 1 auto\"\r\n        @click=\"handleClick\"\r\n      />\r\n      <!-- <AppList\r\n        v-for=\"item in data.appResp.rows\"\r\n        :key=\"item.id\"\r\n        :data=\"item\"\r\n        :iconSize=\"20\"\r\n        :width=\"300\"\r\n        :height=\"450\"\r\n        class=\"app-list\"\r\n        @click=\"handleClick\"\r\n      /> -->\r\n    </div>\r\n    <!-- 分页 -->\r\n    <div class=\"pager\">\r\n      <Pager\r\n        v-if=\"data.appResp\"\r\n        :current=\"page\"\r\n        :total=\"+data.appResp.total\"\r\n        :limit=\"20\"\r\n        :visibleNumber=\"10\"\r\n        @pageChange=\"handlePageChange\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Selector from \"./components/Selector\";\r\nimport AppList from \"@/components/AppList\";\r\nimport fetchData from \"@/mixins/fetchData.js\";\r\nimport Pager from \"@/components/Pager\";\r\nimport { getAppList, getSelector } from \"@/api/padagogy.js\";\r\nexport default {\r\n  mixins: [fetchData({})],\r\n  components: {\r\n    Selector,\r\n    AppList,\r\n    Pager,\r\n  },\r\n  data() {\r\n    return {\r\n      page: 1,\r\n    };\r\n  },\r\n  computed: {\r\n    // 获取url参数\r\n    param() {\r\n      return this.$route.query;\r\n    },\r\n    list() {\r\n      // console.log(this.data.selResp);\r\n      //加工后传给Selector组件的属性\r\n      var arr = [];\r\n\r\n      var firstList = [];\r\n      if (this.data.selResp) {\r\n        firstList = JSON.parse(JSON.stringify(this.data.selResp));\r\n      }\r\n      // console.log(this.data.selResp, firstList);\r\n      //将从url中拿到的参数进行分割\r\n      for (const key in this.param) {\r\n        arr.push(this.param[key].split(\" \"));\r\n      }\r\n\r\n      //数组扁平化\r\n      arr = arr.flat(Infinity);\r\n\r\n      //遍历多级菜单数据，为每项数据加上selected属性\r\n      function traverse(arr, sub) {\r\n        // console.log()\r\n        let newArr = arr.map((t) => {\r\n          let selected = sub.indexOf(t.value) >= 0;\r\n          // console.log(selected);\r\n          if (t.children) t.children = traverse(t.children, sub);\r\n          return {\r\n            selected,\r\n            ...t,\r\n          };\r\n        });\r\n        return newArr;\r\n      }\r\n      arr = traverse(firstList, arr);\r\n      // console.losg(arr);\r\n      return arr;\r\n    },\r\n  },\r\n  methods: {\r\n    async fetchData() {\r\n      // console.log(Object.keys(this.param).length, this.$route.query, \"1\");\r\n      let param = Object.keys(this.param).length ? this.param : \"all\";\r\n      // console.log(\"请求\");\r\n      const selResp = await getSelector();\r\n      const appResp = await getAppList(this.page, 20, param);\r\n      return {\r\n        selResp,\r\n        appResp,\r\n      };\r\n    },\r\n    handlePageChange(newPage) {\r\n      // console.log(newPage);\r\n      this.page = newPage;\r\n    },\r\n    handleClick(id) {\r\n      this.$router.push({\r\n        name: \"PadagogyDetail\",\r\n        params: {\r\n          id,\r\n        },\r\n      });\r\n    },\r\n  },\r\n  watch: {\r\n    page: async function () {\r\n      // console.log(\"1\");\r\n      this.isLoading = true;\r\n      this.data.appResp = await getAppList(this.page, 20, this.param);\r\n      this.isLoading = false;\r\n    },\r\n    async $route() {\r\n      console.log(\"url\");\r\n      this.page = 1;\r\n      this.data.appResp = await getAppList(this.page, 20, this.param);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import \"~@/style/var.less\";\r\n.padagogy-container {\r\n  padding: 20px 40px 0 40px;\r\n  width: calc(100% - 80px);\r\n  // height: 1000px;\r\n  .choose {\r\n    background-color: #fff;\r\n  }\r\n  .list {\r\n    padding: 5px;\r\n    font-size: 50px;\r\n    margin-top: 20px;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    // background-color: #fff;\r\n    justify-content: flex-start;\r\n  }\r\n  .pager {\r\n    padding: 10px 0;\r\n  }\r\n}\r\n// #a {\r\n//   width: 0;\r\n//   height: 0;\r\n// }\r\n</style>\r\n\r\n"]}]}