{"remainingRequest":"E:\\padagogy-object\\padagogy-reception\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\padagogy-object\\padagogy-reception\\src\\views\\Padagogy\\index.vue?vue&type=style&index=0&id=1346f645&lang=less&scoped=true&","dependencies":[{"path":"E:\\padagogy-object\\padagogy-reception\\src\\views\\Padagogy\\index.vue","mtime":1651301150637},{"path":"E:\\padagogy-object\\padagogy-reception\\node_modules\\css-loader\\dist\\cjs.js","mtime":1647849868471},{"path":"E:\\padagogy-object\\padagogy-reception\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1647849869096},{"path":"E:\\padagogy-object\\padagogy-reception\\node_modules\\postcss-loader\\src\\index.js","mtime":1647849868751},{"path":"E:\\padagogy-object\\padagogy-reception\\node_modules\\less-loader\\dist\\cjs.js","mtime":1647849875488},{"path":"E:\\padagogy-object\\padagogy-reception\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647849868210},{"path":"E:\\padagogy-object\\padagogy-reception\\node_modules\\vue-loader\\lib\\index.js","mtime":1647849868876}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KQGltcG9ydCAifkAvc3R5bGUvdmFyLmxlc3MiOw0KLnBhZGFnb2d5LWNvbnRhaW5lciB7DQogIHBhZGRpbmc6IDIwcHggNDBweCAwIDQwcHg7DQogIHdpZHRoOiBjYWxjKDEwMCUgLSA4MHB4KTsNCiAgLy8gaGVpZ2h0OiAxMDAwcHg7DQogIC5jaG9vc2Ugew0KICAgIGJhY2tncm91bmQtY29sb3I6IEBhc3BoYWx0Ow0KICB9DQogIC5saXN0IHsNCiAgICBmb250LXNpemU6IDUwcHg7DQogICAgbWFyZ2luLXRvcDogMjBweDsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGZsZXgtd3JhcDogd3JhcDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogIH0NCiAgLnBhZ2VyIHsNCiAgICBwYWRkaW5nOiAxMHB4IDA7DQogIH0NCn0NCi8vICNhIHsNCi8vICAgd2lkdGg6IDA7DQovLyAgIGhlaWdodDogMDsNCi8vIH0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Padagogy","sourcesContent":["<template>\r\n  <div class=\"padagogy-container\" v-if=\"this.data\">\r\n    <!-- 多级选择 -->\r\n    <div class=\"choose\">\r\n      <Selector :list=\"list\" />\r\n    </div>\r\n    <!-- app列表 -->\r\n    <div class=\"list\" v-if=\"data.appResp\">\r\n      <AppList\r\n        v-for=\"item in data.appResp.rows\"\r\n        :key=\"item.id\"\r\n        :data=\"item\"\r\n        :iconSize=\"20\"\r\n        :width=\"350\"\r\n        :height=\"450\"\r\n        style=\"margin: 0 0 10px 0\"\r\n      />\r\n    </div>\r\n    <!-- 分页 -->\r\n    <div class=\"pager\">\r\n      <Pager\r\n        v-if=\"data.appResp\"\r\n        :current=\"page\"\r\n        :total=\"data.appResp.total\"\r\n        :limit=\"20\"\r\n        :visibleNumber=\"10\"\r\n        @pageChange=\"handlePageChange\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Selector from \"./components/Selector\";\r\nimport AppList from \"@/components/AppList\";\r\nimport fetchData from \"@/mixins/fetchData.js\";\r\nimport Pager from \"@/components/Pager\";\r\nimport { getAppList, getSelector } from \"@/api/padagogy.js\";\r\nexport default {\r\n  mixins: [fetchData({})],\r\n  components: {\r\n    Selector,\r\n    AppList,\r\n    Pager,\r\n  },\r\n  data() {\r\n    return {\r\n      page: 1,\r\n    };\r\n  },\r\n  computed: {\r\n    // 获取url参数\r\n    param() {\r\n      return this.$route.query;\r\n    },\r\n    list() {\r\n      // console.log(\"执行\");\r\n      //加工后传给Selector组件的属性\r\n      var arr = [];\r\n\r\n      var firstList = [];\r\n      if (this.data.selResp) {\r\n        firstList = JSON.parse(JSON.stringify(this.data.selResp));\r\n      }\r\n      // console.log(this.data.selResp, firstList);\r\n      //将从url中拿到的参数进行分割\r\n      for (const key in this.param) {\r\n        arr.push(this.param[key].split(\" \"));\r\n      }\r\n\r\n      //数组扁平化\r\n      arr = arr.flat(Infinity);\r\n\r\n      //遍历多级菜单数据，为每项数据加上selected属性\r\n      function traverse(arr, sub) {\r\n        // console.log()\r\n        let newArr = arr.map((t) => {\r\n          let selected = sub.indexOf(t.value) >= 0;\r\n          // console.log(selected);\r\n          if (t.children) t.children = traverse(t.children, sub);\r\n          return {\r\n            selected,\r\n            ...t,\r\n          };\r\n        });\r\n        return newArr;\r\n      }\r\n      arr = traverse(firstList, arr);\r\n      // console.losg(arr);\r\n      return arr;\r\n    },\r\n  },\r\n  methods: {\r\n    async fetchData() {\r\n      let param = Object.keys(this.param).length || \"all\";\r\n      const selResp = await getSelector();\r\n      const appResp = await getAppList(this.page, 20, param);\r\n      return {\r\n        selResp,\r\n        appResp,\r\n      };\r\n    },\r\n    handlePageChange(newPage) {\r\n      // console.log(newPage);\r\n      this.page = newPage;\r\n    },\r\n  },\r\n  watch: {\r\n    page: async function () {\r\n      // console.log(\"1\");\r\n      this.isLoading = true;\r\n      this.data.appResp = await getAppList(this.page, 20, this.param);\r\n      this.isLoading = false;\r\n    },\r\n    async $route() {\r\n      this.data.appResp = await getAppList(this.page, 20, this.param);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import \"~@/style/var.less\";\r\n.padagogy-container {\r\n  padding: 20px 40px 0 40px;\r\n  width: calc(100% - 80px);\r\n  // height: 1000px;\r\n  .choose {\r\n    background-color: @asphalt;\r\n  }\r\n  .list {\r\n    font-size: 50px;\r\n    margin-top: 20px;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: space-between;\r\n  }\r\n  .pager {\r\n    padding: 10px 0;\r\n  }\r\n}\r\n// #a {\r\n//   width: 0;\r\n//   height: 0;\r\n// }\r\n</style>\r\n\r\n"]}]}